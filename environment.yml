# =============================================================================
# DGGS Benchmark Replication - Conda/Mamba Environment
# =============================================================================
#
# This file defines the complete Python environment for the DGGS benchmark
# replication. Using mamba/conda ensures clean GDAL installation without
# version conflicts.
#
# Usage (local):
#   mamba env create -f environment.yml
#   mamba activate dggs-benchmark
#
# Usage (Docker with micromamba):
#   micromamba install -y -n base -f environment.yml
#
# Replication of: Law & Ardo (2024)
# "Using a discrete global grid system for a scalable, interoperable, 
# and reproducible system of land-use mapping"
# https://doi.org/10.1080/20964471.2024.2429847
# =============================================================================

name: base

channels:
  - conda-forge
  - defaults

dependencies:
  # Python version
  - python=3.11
  
  # ---------------------------------------------------------------------------
  # Core geospatial - from conda-forge for clean GDAL integration
  # PINNED to match requirements.txt for consistency
  # ---------------------------------------------------------------------------
  - gdal=3.6.4
  - geopandas=0.14.3
  - rasterio=1.3.9
  - fiona=1.9.5
  - shapely=2.0.2
  - pyproj=3.6.1
  
  # ---------------------------------------------------------------------------
  # Data processing - PINNED versions
  # ---------------------------------------------------------------------------
  - numpy=1.26.4
  - pandas=2.2.0
  - pyarrow=15.0.0
  
  # ---------------------------------------------------------------------------
  # Visualization
  # ---------------------------------------------------------------------------
  - matplotlib=3.8.2
  - seaborn=0.13.2
  
  # ---------------------------------------------------------------------------
  # Utilities
  # ---------------------------------------------------------------------------
  - tqdm=4.66.1
  - click=8.1.7
  - pyyaml=6.0.1
  - psutil=5.9.8
  
  # ---------------------------------------------------------------------------
  # Pip packages (not available in conda-forge or need specific versions)
  # THIS IS THE AUTHORITATIVE SOURCE - matches requirements.txt exactly
  # ---------------------------------------------------------------------------
  - pip
  - pip:
    # H3 DGGS - FIXED TO 0.3.7 (incompatible with 0.2.6)
    - h3==3.7.7
    - h3pandas==0.3.7
    
    # Paper authors' optimized DGGS tools - pinned for reproducibility
    - vector2dggs==0.10.1
    - raster2dggs==0.2.6
    
    # NLM raster generation (as in paper)
    - nlmpy==1.0.1
    
    # Memory profiling
    - memory_profiler==0.61.0
    
    # Jupyter
    - jupyter==1.0.0
    - ipykernel==6.29.0
    
    # Additional fastparquet
    - fastparquet==2024.2.0
